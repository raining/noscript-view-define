{"version":3,"sources":["webpack:///edefine.min.js","webpack:///webpack/bootstrap a0699ccf1e178a958f24","webpack:///./edefine.js","webpack:///external \"_\"","webpack:///external \"ns\""],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","wrapperEvents","srcFunc","objFunc","_len","arguments","length","args","Array","_key","_","isFunction","apply","this","invoke","concat","eventsCustomizer","objValue","srcValue","key","checkIgnoreMerge","ns","assert","fail","wrap","groupEventsCustomizer","mergeWith","mergeCustomizer","_formatModelsDecl","_len2","_key2","viewInfo","info","isString","View","isUndefined","inheritInfo","classExtend","child","mixins","clone","parent","pop","customizer","bind","chain","get","reverse","unshift","map","mixin","pick","PATH_EXTENDS","push","thru","spreadMergeWith","PATH_PARENT_EXTENDS","defaults","value","spread","ViewCollection","forEach","edefine","_len3","_key3","define","last"],"mappings":"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","file":"edefine.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _ = __webpack_require__(1);\n\tvar ns = __webpack_require__(2);\n\t\n\tvar PATH_EXTENDS = ['ctor', 'events', 'models', 'methods'];\n\tvar PATH_PARENT_EXTENDS = ['ctor', 'events', 'models'];\n\tvar spreadMergeWith = _.spread(_.mergeWith);\n\t\n\tfunction wrapperEvents(srcFunc, objFunc) {\n\t    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n\t        args[_key - 2] = arguments[_key];\n\t    }\n\t\n\t    srcFunc && (_.isFunction(srcFunc) ? srcFunc.apply(this, args) : _.invoke.apply(_, [this, srcFunc].concat(args)));\n\t    objFunc && (_.isFunction(objFunc) ? objFunc.apply(this, args) : _.invoke.apply(_, [this, objFunc].concat(args)));\n\t}\n\t\n\t/**\n\t * Объединение колбеков одинаковых событий\n\t * @param {string|function} objValue\n\t * @param {string|function} srcValue\n\t * @param {string} key\n\t * @returns {string|function}\n\t */\n\tfunction eventsCustomizer(objValue, srcValue, key) {\n\t    if (checkIgnoreMerge(objValue, srcValue)) {\n\t        return srcValue;\n\t    }\n\t\n\t    if (objValue === 'invalidate' && srcValue === 'keepValid' || objValue === 'keepValid' && srcValue === 'invalidate') {\n\t\n\t        ns.assert.fail('ns.View', 'Попытка определить подписки с противоположными действиями. Событие: %s', key);\n\t    }\n\t\n\t    return _.wrap(objValue, _.wrap(srcValue, wrapperEvents));\n\t}\n\t\n\t/**\n\t * Объединение объектов событий\n\t * @param {Object} objValue\n\t * @param {Object} srcValue\n\t * @returns {Object}\n\t */\n\tfunction groupEventsCustomizer(objValue, srcValue) {\n\t    if (checkIgnoreMerge(objValue, srcValue)) {\n\t        return srcValue;\n\t    }\n\t\n\t    return _.mergeWith(objValue, srcValue, eventsCustomizer);\n\t}\n\t\n\t/**\n\t * Объединения данных при наследовании\n\t * @param {*} objValue\n\t * @param {*} srcValue\n\t * @param {string} key\n\t * @returns {*}\n\t */\n\tfunction mergeCustomizer(objValue, srcValue, key) {\n\t    if (checkIgnoreMerge(objValue, srcValue)) {\n\t        return srcValue;\n\t    }\n\t\n\t    if (key === 'events') {\n\t        return groupEventsCustomizer(objValue, srcValue);\n\t    }\n\t\n\t    if (key === 'models') {\n\t        return _.mergeWith(this._formatModelsDecl(objValue), this._formatModelsDecl(srcValue), groupEventsCustomizer);\n\t    }\n\t\n\t    if (key === 'ctor') {\n\t        return function () {\n\t            for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t                args[_key2] = arguments[_key2];\n\t            }\n\t\n\t            srcValue && srcValue.apply(this, args);\n\t            objValue && objValue.apply(this, args);\n\t        };\n\t    }\n\t}\n\t\n\t/**\n\t * Получение информации по виду\n\t * @param {Object|string} info\n\t * @returns {Object}\n\t */\n\tfunction viewInfo(info) {\n\t    return _.isString(info) && ns.View.info(info) || info;\n\t}\n\t\n\t/**\n\t * Проверка необходимости выполнения слияния\n\t * @param {*} objValue\n\t * @param {*} srcValue\n\t * @returns {boolean}\n\t */\n\tfunction checkIgnoreMerge(objValue, srcValue) {\n\t    return _.isUndefined(objValue) || objValue === srcValue;\n\t}\n\t\n\t/**\n\t * Хелпер для наследования событийных привязок и методов\n\t * @param {Object} classExtend Расширяемый объект\n\t * @param {Object} child Объект-информация о сущности\n\t * @param {array} mixins Массив имен предков\n\t * @returns {Object} Модифицированный объект-информация\n\t */\n\tfunction inheritInfo(classExtend, child, mixins) {\n\t    mixins = _.clone(mixins);\n\t    var parent = viewInfo(mixins.pop());\n\t    var customizer = mergeCustomizer.bind(classExtend);\n\t\n\t    return _(child).chain().get('mixins', []).concat(mixins).reverse().unshift({}, child).map(function (mixin) {\n\t        return _.pick(viewInfo(mixin), PATH_EXTENDS);\n\t    }).push(customizer).thru(spreadMergeWith).mergeWith(_.pick(parent, PATH_PARENT_EXTENDS), customizer).defaults(child).value();\n\t}\n\t\n\t[ns.View, ns.ViewCollection].forEach(function (classExtend) {\n\t    classExtend.edefine = function (id, info) {\n\t        for (var _len3 = arguments.length, mixins = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n\t            mixins[_key3 - 2] = arguments[_key3];\n\t        }\n\t\n\t        return classExtend.define(id, inheritInfo(classExtend, info, mixins), _.last(mixins));\n\t    };\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = _;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = ns;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** edefine.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a0699ccf1e178a958f24\n **/","const _ = require('lodash');\nconst ns = require('ns');\n\nconst PATH_EXTENDS = [ 'ctor', 'events', 'models', 'methods' ];\nconst PATH_PARENT_EXTENDS = [ 'ctor', 'events', 'models' ];\nconst spreadMergeWith = _.spread(_.mergeWith);\n\nfunction wrapperEvents(srcFunc, objFunc, ...args) {\n    srcFunc && (_.isFunction(srcFunc) ? srcFunc.apply(this, args) : _.invoke(this, srcFunc, ...args));\n    objFunc && (_.isFunction(objFunc) ? objFunc.apply(this, args) : _.invoke(this, objFunc, ...args));\n}\n\n/**\n * Объединение колбеков одинаковых событий\n * @param {string|function} objValue\n * @param {string|function} srcValue\n * @param {string} key\n * @returns {string|function}\n */\nfunction eventsCustomizer(objValue, srcValue, key) {\n    if (checkIgnoreMerge(objValue, srcValue)) {\n        return srcValue;\n    }\n\n    if ((objValue === 'invalidate' && srcValue === 'keepValid') ||\n        (objValue === 'keepValid' && srcValue === 'invalidate')) {\n\n        ns.assert.fail('ns.View', 'Попытка определить подписки с противоположными действиями. Событие: %s', key);\n    }\n\n    return _.wrap(objValue, _.wrap(srcValue, wrapperEvents));\n}\n\n/**\n * Объединение объектов событий\n * @param {Object} objValue\n * @param {Object} srcValue\n * @returns {Object}\n */\nfunction groupEventsCustomizer(objValue, srcValue) {\n    if (checkIgnoreMerge(objValue, srcValue)) {\n        return srcValue;\n    }\n\n    return _.mergeWith(objValue, srcValue, eventsCustomizer);\n}\n\n/**\n * Объединения данных при наследовании\n * @param {*} objValue\n * @param {*} srcValue\n * @param {string} key\n * @returns {*}\n */\nfunction mergeCustomizer(objValue, srcValue, key) {\n    if (checkIgnoreMerge(objValue, srcValue)) {\n        return srcValue;\n    }\n\n    if (key === 'events') {\n        return groupEventsCustomizer(objValue, srcValue);\n    }\n\n    if (key === 'models') {\n        return _.mergeWith(\n            this._formatModelsDecl(objValue),\n            this._formatModelsDecl(srcValue),\n            groupEventsCustomizer\n        );\n    }\n\n    if (key === 'ctor') {\n        return function (...args) {\n            srcValue && srcValue.apply(this, args);\n            objValue && objValue.apply(this, args);\n        };\n    }\n}\n\n/**\n * Получение информации по виду\n * @param {Object|string} info\n * @returns {Object}\n */\nfunction viewInfo(info) {\n    return _.isString(info) && ns.View.info(info) || info;\n}\n\n/**\n * Проверка необходимости выполнения слияния\n * @param {*} objValue\n * @param {*} srcValue\n * @returns {boolean}\n */\nfunction checkIgnoreMerge(objValue, srcValue) {\n    return _.isUndefined(objValue) || objValue === srcValue;\n}\n\n/**\n * Хелпер для наследования событийных привязок и методов\n * @param {Object} classExtend Расширяемый объект\n * @param {Object} child Объект-информация о сущности\n * @param {array} mixins Массив имен предков\n * @returns {Object} Модифицированный объект-информация\n */\nfunction inheritInfo(classExtend, child, mixins) {\n    mixins = _.clone(mixins);\n    const parent = viewInfo(mixins.pop());\n    const customizer = mergeCustomizer.bind(classExtend);\n\n    return _(child)\n        .chain()\n        .get('mixins', [])\n        .concat(mixins)\n        .reverse()\n        .unshift({}, child)\n        .map(mixin => _.pick(viewInfo(mixin), PATH_EXTENDS))\n        .push(customizer)\n        .thru(spreadMergeWith)\n        .mergeWith(_.pick(parent, PATH_PARENT_EXTENDS), customizer)\n        .defaults(child)\n        .value();\n}\n\n[ ns.View, ns.ViewCollection ].forEach(function (classExtend) {\n    classExtend.edefine = function (id, info, ...mixins) {\n        return classExtend.define(id, inheritInfo(classExtend, info, mixins), _.last(mixins));\n    };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./edefine.js\n **/","module.exports = _;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = ns;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ns\"\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":""}